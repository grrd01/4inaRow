/*
* Socket.IO.js build:0.9.16, development. 
* Copyright(c) 2011 LearnBoost <dev@learnboost.com>
* MIT Licensed 
*/
var io="undefined"==typeof module?{}:module.exports;!function(){!function(t,r){var s=t;s.version="0.9.16",s.protocol=1,s.transports=[],s.j=[],s.sockets={},s.connect=function(t,e){var n,o,t=s.util.parseUri(t),i=(r&&r.location&&(t.protocol=t.protocol||r.location.protocol.slice(0,-1),t.host=t.host||(r.document?r.document.domain:r.location.hostname),t.port=t.port||r.location.port),n=s.util.uniqueUri(t),{host:t.host,secure:"https"==t.protocol,port:t.port||("https"==t.protocol?443:80),query:t.query||""});return s.util.merge(i,e),!i["force new connection"]&&s.sockets[n]||(o=new s.Socket(i)),!i["force new connection"]&&o&&(s.sockets[n]=o),(o=o||s.sockets[n]).of(1<t.path.length?t.path:"")}}("object"==typeof module?module.exports:this.io={},this),!function(o){var c=("undefined"!=typeof io?io:module.exports).util={},i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],e=(c.parseUri=function(t){for(var e=i.exec(t||""),n={},o=14;o--;)n[r[o]]=e[o]||"";return n},c.uniqueUri=function(t){var e=t.protocol,n=t.host,t=t.port;return"document"in o?(n=n||document.domain,t=t||("https"==e&&"https:"!==document.location.protocol?443:document.location.port)):(n=n||"localhost",t||"https"!=e||(t=443)),(e||"http")+"://"+n+":"+(t||80)},c.query=function(t,e){var n,o=c.chunkQuery(t||""),i=[];for(n in c.merge(o,c.chunkQuery(e||"")),o)o.hasOwnProperty(n)&&i.push(n+"="+o[n]);return i.length?"?"+i.join("&"):""},!(c.chunkQuery=function(t){for(var e,n={},o=t.split("&"),i=0,r=o.length;i<r;++i)(e=o[i].split("="))[0]&&(n[e[0]]=e[1]);return n}));c.load=function(t){if("document"in o&&"complete"===document.readyState||e)return t();c.on(o,"load",t,!1)},c.on=function(t,e,n,o){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener&&t.addEventListener(e,n,o)},c.request=function(t){if(t&&"undefined"!=typeof XDomainRequest&&!c.ua.hasCORS)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!t||c.ua.hasCORS))return new XMLHttpRequest;if(!t)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&c.load(function(){e=!0}),c.defer=function(t){if(!c.ua.webkit||"undefined"!=typeof importScripts)return t();c.load(function(){setTimeout(t,100)})},c.merge=function(t,e,n,o){var i,r=o||[],s=void 0===n?2:n;for(i in e)e.hasOwnProperty(i)&&c.indexOf(r,i)<0&&("object"==typeof t[i]&&s?c.merge(t[i],e[i],s-1,r):(t[i]=e[i],r.push(e[i])));return t},c.mixin=function(t,e){c.merge(t.prototype,e.prototype)},c.inherit=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},c.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},c.intersect=function(t,e){for(var n=[],o=t.length>e.length?t:e,i=t.length>e.length?e:t,r=0,s=i.length;r<s;r++)~c.indexOf(o,i[r])&&n.push(i[r]);return n},c.indexOf=function(t,e,n){for(var o=t.length,n=n<0?n+o<0?0:n+o:n||0;n<o&&t[n]!==e;n++);return o<=n?-1:n},c.toArray=function(t){for(var e=[],n=0,o=t.length;n<o;n++)e.push(t[n]);return e},c.ua={},c.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var t=new XMLHttpRequest}catch(t){return!1}return null!=t.withCredentials}(),c.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent),c.ua.iDevice="undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)}(this),!function(t,s){function e(){}(t.EventEmitter=e).prototype.addListener=e.prototype.on=function(t,e){return this.$events||(this.$events={}),this.$events[t]?s.util.isArray(this.$events[t])?this.$events[t].push(e):this.$events[t]=[this.$events[t],e]:this.$events[t]=e,this},e.prototype.once=function(t,e){var n=this;function o(){n.removeListener(t,o),e.apply(this,arguments)}return o.listener=e,this.on(t,o),this},e.prototype.removeListener=function(t,e){if(this.$events&&this.$events[t]){var n=this.$events[t];if(s.util.isArray(n)){for(var o=-1,i=0,r=n.length;i<r;i++)if(n[i]===e||n[i].listener&&n[i].listener===e){o=i;break}if(o<0)return this;n.splice(o,1),n.length||delete this.$events[t]}else(n===e||n.listener&&n.listener===e)&&delete this.$events[t]}return this},e.prototype.removeAllListeners=function(t){return void 0===t?this.$events={}:this.$events&&this.$events[t]&&(this.$events[t]=null),this},e.prototype.listeners=function(t){return this.$events||(this.$events={}),this.$events[t]||(this.$events[t]=[]),s.util.isArray(this.$events[t])||(this.$events[t]=[this.$events[t]]),this.$events[t]},e.prototype.emit=function(t){if(!this.$events)return!1;var e=this.$events[t];if(!e)return!1;var n=Array.prototype.slice.call(arguments,1);if("function"==typeof e)e.apply(this,n);else{if(!s.util.isArray(e))return!1;for(var o=e.slice(),i=0,r=o.length;i<r;i++)o[i].apply(this,n)}return!0}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),!function(exports,nativeJSON){"use strict";if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={};function f(t){return t<10?"0"+t:t}function date(t,e){return isFinite(t.valueOf())?t.getUTCFullYear()+"-"+f(t.getUTCMonth()+1)+"-"+f(t.getUTCDate())+"T"+f(t.getUTCHours())+":"+f(t.getUTCMinutes())+":"+f(t.getUTCSeconds())+"Z":null}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,o,i,r,s,c=gap,a=e[t];switch(a instanceof Date&&(a=date(t)),typeof(a="function"==typeof rep?rep.call(e,t,a):a)){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(a)){for(r=a.length,n=0;n<r;n+=1)s[n]=str(n,a)||"null";i=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+c+"]":"["+s.join(",")+"]"}else{if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(i=str(o=rep[n],a))&&s.push(quote(o)+(gap?": ":":")+i);else for(o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i=str(o,a))&&s.push(quote(o)+(gap?": ":":")+i);i=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+c+"}":"{"+s.join(",")+"}"}return gap=c,i}}JSON.stringify=function(t,e,n){var o;if(indent=gap="","number"==typeof n)for(o=0;o<n;o+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(!(rep=e)||"function"==typeof e||"object"==typeof e&&"number"==typeof e.length)return str("",{"":t});throw new Error("JSON.stringify")},JSON.parse=function(text,reviver){var j;function walk(t,e){var n,o,i=t[e];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(o=walk(i,n))?i[n]=o:delete i[n]);return reviver.call(t,e,i)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}(void 0!==io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),!function(t,e){var i=t.parser={},a=i.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],p=i.reasons=["transport not supported","client not handshaken","unauthorized"],u=i.advice=["reconnect"],h=e.JSON,l=e.util.indexOf,r=(i.encodePacket=function(t){var e=l(a,t.type),n=t.id||"",o=t.endpoint||"",i=t.ack,r=null;switch(t.type){case"error":var s=t.reason?l(p,t.reason):"",c=t.advice?l(u,t.advice):"";""===s&&""===c||(r=s+(""!==c?"+"+c:""));break;case"message":""!==t.data&&(r=t.data);break;case"event":s={name:t.name};t.args&&t.args.length&&(s.args=t.args),r=h.stringify(s);break;case"json":r=h.stringify(t.data);break;case"connect":t.qs&&(r=t.qs);break;case"ack":r=t.ackId+(t.args&&t.args.length?"+"+h.stringify(t.args):"")}e=[e,n+("data"==i?"+":""),o];return null!=r&&e.push(r),e.join(":")},i.encodePayload=function(t){var e="";if(1==t.length)return t[0];for(var n=0,o=t.length;n<o;n++)e+="�"+t[n].length+"�"+t[n];return e},/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/);i.decodePacket=function(t){if(!(o=t.match(r)))return{};var e=o[2]||"",t=o[5]||"",n={type:a[o[1]],endpoint:o[4]||""};switch(e&&(n.id=e,o[3]?n.ack="data":n.ack=!0),n.type){case"error":var o=t.split("+");n.reason=p[o[0]]||"",n.advice=u[o[1]]||"";break;case"message":n.data=t||"";break;case"event":try{var i=h.parse(t);n.name=i.name,n.args=i.args}catch(t){}n.args=n.args||[];break;case"json":try{n.data=h.parse(t)}catch(t){}break;case"connect":n.qs=t||"";break;case"ack":o=t.match(/^([0-9]+)(\+)?(.*)/);if(o&&(n.ackId=o[1],n.args=[],o[3]))try{n.args=o[3]?h.parse(o[3]):[]}catch(t){}}return n},i.decodePayload=function(t){if("�"!=t.charAt(0))return[i.decodePacket(t)];for(var e=[],n=1,o="";n<t.length;n++)"�"==t.charAt(n)?(e.push(i.decodePacket(t.substr(n+1).substr(0,o))),n+=Number(o)+1,o=""):o+=t.charAt(n);return e}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),!function(t,i){function e(t,e){this.socket=t,this.sessid=e}t.Transport=e,i.util.mixin(e,i.EventEmitter),e.prototype.heartbeats=function(){return!0},e.prototype.onData=function(t){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==t){var e=i.parser.decodePayload(t);if(e&&e.length)for(var n=0,o=e.length;n<o;n++)this.onPacket(e[n])}return this},e.prototype.onPacket=function(t){return this.socket.setHeartbeatTimeout(),"heartbeat"==t.type?this.onHeartbeat():("connect"==t.type&&""==t.endpoint&&this.onConnect(),"error"==t.type&&"reconnect"==t.advice&&(this.isOpen=!1),this.socket.onPacket(t),this)},e.prototype.setCloseTimeout=function(){var t;this.closeTimeout||((t=this).closeTimeout=setTimeout(function(){t.onDisconnect()},this.socket.closeTimeout))},e.prototype.onDisconnect=function(){return this.isOpen&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},e.prototype.onConnect=function(){return this.socket.onConnect(),this},e.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},e.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},e.prototype.packet=function(t){this.send(i.parser.encodePacket(t))},e.prototype.onHeartbeat=function(t){this.packet({type:"heartbeat"})},e.prototype.onOpen=function(){this.isOpen=!0,this.clearCloseTimeout(),this.socket.onOpen()},e.prototype.onClose=function(){this.isOpen=!1,this.socket.onClose(),this.onDisconnect()},e.prototype.prepareUrl=function(){var t=this.socket.options;return this.scheme()+"://"+t.host+":"+t.port+"/"+t.resource+"/"+i.protocol+"/"+this.name+"/"+this.sessid},e.prototype.ready=function(t,e){e.call(this)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),!function(t,c,n){function e(t){var e;this.options={port:80,secure:!1,document:"document"in n&&document,resource:"socket.io",transports:c.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!1,"auto connect":!0,"flash policy port":10843,manualFlush:!1},c.util.merge(this.options,t),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,!this.options["sync disconnect on unload"]||this.isXDomain()&&!c.util.ua.hasCORS||(e=this,c.util.on(n,"beforeunload",function(){e.disconnectSync()},!1)),this.options["auto connect"]&&this.connect()}function a(){}t.Socket=e,c.util.mixin(e,c.EventEmitter),e.prototype.of=function(t){return this.namespaces[t]||(this.namespaces[t]=new c.SocketNamespace(this,t),""!==t&&this.namespaces[t].packet({type:"connect"})),this.namespaces[t]},e.prototype.publish=function(){var t,e;for(e in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(e)&&(t=this.of(e)).$emit.apply(t,arguments)},e.prototype.handshake=function(e){var n=this,t=this.options;function o(t){t instanceof Error?(n.connecting=!1,n.onError(t.message)):e.apply(null,t.split(":"))}var i,r,s,t=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,c.protocol,c.util.query(this.options.query,"t="+ +new Date)].join("/");this.isXDomain()&&!c.util.ua.hasCORS?(i=document.getElementsByTagName("script")[0],(r=document.createElement("script")).src=t+"&jsonp="+c.j.length,i.parentNode.insertBefore(r,i),c.j.push(function(t){o(t),r.parentNode.removeChild(r)})):((s=c.util.request()).open("GET",t,!0),this.isXDomain()&&(s.withCredentials=!0),s.onreadystatechange=function(){4==s.readyState&&(s.onreadystatechange=a,200==s.status?o(s.responseText):403!=s.status&&(n.connecting=!1,n.reconnecting)||n.onError(s.responseText))},s.send(null))},e.prototype.getTransport=function(t){for(var e,n=t||this.transports,o=0;e=n[o];o++)if(c.Transport[e]&&c.Transport[e].check(this)&&(!this.isXDomain()||c.Transport[e].xdomainCheck(this)))return new c.Transport[e](this,this.sessionid);return null},e.prototype.connect=function(i){var r;return this.connecting||((r=this).connecting=!0,this.handshake(function(t,e,n,o){r.sessionid=t,r.closeTimeout=1e3*n,r.heartbeatTimeout=1e3*e,r.transports||(r.transports=r.origTransports=o?c.util.intersect(o.split(","),r.options.transports):r.options.transports),r.setHeartbeatTimeout(),function e(t){if(r.transport&&r.transport.clearTimeouts(),r.transport=r.getTransport(t),!r.transport)return r.publish("connect_failed");r.transport.ready(r,function(){r.connecting=!0,r.publish("connecting",r.transport.name),r.transport.open(),r.options["connect timeout"]&&(r.connectTimeoutTimer=setTimeout(function(){if(!r.connected&&(r.connecting=!1,r.options["try multiple transports"])){for(var t=r.transports;0<t.length&&t.splice(0,1)[0]!=r.transport.name;);t.length?e(t):r.publish("connect_failed")}},r.options["connect timeout"]))})}(r.transports),r.once("connect",function(){clearTimeout(r.connectTimeoutTimer),i&&"function"==typeof i&&i()})})),this},e.prototype.setHeartbeatTimeout=function(){var t;clearTimeout(this.heartbeatTimeoutTimer),this.transport&&!this.transport.heartbeats()||((t=this).heartbeatTimeoutTimer=setTimeout(function(){t.transport.onClose()},this.heartbeatTimeout))},e.prototype.packet=function(t){return this.connected&&!this.doBuffer?this.transport.packet(t):this.buffer.push(t),this},e.prototype.setBuffer=function(t){!(this.doBuffer=t)&&this.connected&&this.buffer.length&&!this.options.manualFlush&&this.flushBuffer()},e.prototype.flushBuffer=function(){this.transport.payload(this.buffer),this.buffer=[]},e.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},e.prototype.disconnectSync=function(){var t=c.util.request(),e=["http"+(this.options.secure?"s":"")+":/",this.options.host+":"+this.options.port,this.options.resource,c.protocol,"",this.sessionid].join("/")+"/?disconnect=1";t.open("GET",e,!1),t.send(null),this.onDisconnect("booted")},e.prototype.isXDomain=function(){var t=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=t},e.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},e.prototype.onOpen=function(){this.open=!0},e.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},e.prototype.onPacket=function(t){this.of(t.endpoint).onPacket(t)},e.prototype.onError=function(t){t&&t.advice&&"reconnect"===t.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect)&&this.reconnect(),this.publish("error",t&&t.reason?t.reason:t)},e.prototype.onDisconnect=function(t){var e=this.connected,n=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(e||n)&&(this.transport.close(),this.transport.clearTimeouts(),e)&&(this.publish("disconnect",t),"booted"!=t)&&this.options.reconnect&&!this.reconnecting&&this.reconnect()},e.prototype.reconnect=function(){this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var e=this,t=this.options["max reconnection attempts"],n=this.options["try multiple transports"],o=this.options["reconnection limit"];function i(){if(e.connected){for(var t in e.namespaces)e.namespaces.hasOwnProperty(t)&&""!==t&&e.namespaces[t].packet({type:"connect"});e.publish("reconnect",e.transport.name,e.reconnectionAttempts)}clearTimeout(e.reconnectionTimer),e.removeListener("connect_failed",r),e.removeListener("connect",r),e.reconnecting=!1,delete e.reconnectionAttempts,delete e.reconnectionDelay,delete e.reconnectionTimer,delete e.redoTransports,e.options["try multiple transports"]=n}function r(){if(e.reconnecting)return e.connected?i():e.connecting&&e.reconnecting?e.reconnectionTimer=setTimeout(r,1e3):void(e.reconnectionAttempts++>=t?e.redoTransports?(e.publish("reconnect_failed"),i()):(e.on("connect_failed",r),e.options["try multiple transports"]=!0,e.transports=e.origTransports,e.transport=e.getTransport(),e.redoTransports=!0,e.connect()):(e.reconnectionDelay<o&&(e.reconnectionDelay*=2),e.connect(),e.publish("reconnecting",e.reconnectionDelay,e.reconnectionAttempts),e.reconnectionTimer=setTimeout(r,e.reconnectionDelay)))}this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(r,this.reconnectionDelay),this.on("connect",r)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports,this),!function(t,i){function e(t,e){this.socket=t,this.name=e||"",this.flags={},this.json=new n(this,"json"),this.ackPackets=0,this.acks={}}function n(t,e){this.namespace=t,this.name=e}t.SocketNamespace=e,i.util.mixin(e,i.EventEmitter),e.prototype.$emit=i.EventEmitter.prototype.emit,e.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},e.prototype.packet=function(t){return t.endpoint=this.name,this.socket.packet(t),this.flags={},this},e.prototype.send=function(t,e){t={type:this.flags.json?"json":"message",data:t};return"function"==typeof e&&(t.id=++this.ackPackets,t.ack=!0,this.acks[t.id]=e),this.packet(t)},e.prototype.emit=function(t){var e=Array.prototype.slice.call(arguments,1),n=e[e.length-1],o={type:"event",name:t};return"function"==typeof n&&(o.id=++this.ackPackets,o.ack="data",this.acks[o.id]=n,e=e.slice(0,e.length-1)),o.args=e,this.packet(o)},e.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},e.prototype.onPacket=function(t){var e=this;function n(){e.packet({type:"ack",args:i.util.toArray(arguments),ackId:t.id})}switch(t.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(t.reason||"booted"):this.$emit("disconnect",t.reason);break;case"message":case"json":var o=["message",t.data];"data"==t.ack?o.push(n):t.ack&&this.packet({type:"ack",ackId:t.id}),this.$emit.apply(this,o);break;case"event":o=[t.name].concat(t.args);"data"==t.ack&&o.push(n),this.$emit.apply(this,o);break;case"ack":this.acks[t.ackId]&&(this.acks[t.ackId].apply(this,t.args),delete this.acks[t.ackId]);break;case"error":t.advice?this.socket.onError(t):"unauthorized"==t.reason?this.$emit("connect_failed",t.reason):this.$emit("error",t.reason)}},n.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},n.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==io?io:module.exports,void 0!==io?io:module.parent.exports),!function(t,o,i){function e(t){o.Transport.apply(this,arguments)}t.websocket=e,o.util.inherit(e,o.Transport),e.prototype.name="websocket",e.prototype.open=function(){var t=o.util.query(this.socket.options.query),e=this,n=n||i.MozWebSocket||i.WebSocket;return this.websocket=new n(this.prepareUrl()+t),this.websocket.onopen=function(){e.onOpen(),e.socket.setBuffer(!1)},this.websocket.onmessage=function(t){e.onData(t.data)},this.websocket.onclose=function(){e.onClose(),e.socket.setBuffer(!0)},this.websocket.onerror=function(t){e.onError(t)},this},o.util.ua.iDevice?e.prototype.send=function(t){var e=this;return setTimeout(function(){e.websocket.send(t)},0),this}:e.prototype.send=function(t){return this.websocket.send(t),this},e.prototype.payload=function(t){for(var e=0,n=t.length;e<n;e++)this.packet(t[e]);return this},e.prototype.close=function(){return this.websocket.close(),this},e.prototype.onError=function(t){this.socket.onError(t)},e.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},e.check=function(){return"WebSocket"in i&&!("__addTask"in WebSocket)||"MozWebSocket"in i},e.xdomainCheck=function(){return!0},o.transports.push("websocket")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,this),!function(t,s,c){function e(t){t&&(s.Transport.apply(this,arguments),this.sendBuffer=[])}function n(){}t.XHR=e,s.util.inherit(e,s.Transport),e.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},e.prototype.payload=function(t){for(var e=[],n=0,o=t.length;n<o;n++)e.push(s.parser.encodePacket(t[n]));this.send(s.parser.encodePayload(e))},e.prototype.send=function(t){return this.post(t),this},e.prototype.post=function(t){var e=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),c.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function(){this.onload=n,e.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=n,e.posting=!1,200==this.status?e.socket.setBuffer(!1):e.onClose())},this.sendXHR.send(t)},e.prototype.close=function(){return this.onClose(),this},e.prototype.request=function(t){var e=s.util.request(this.socket.isXDomain()),n=s.util.query(this.socket.options.query,"t="+ +new Date);if(e.open(t||"GET",this.prepareUrl()+n,!0),"POST"==t)try{e.setRequestHeader?e.setRequestHeader("Content-type","text/plain;charset=UTF-8"):e.contentType="text/plain"}catch(t){}return e},e.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},e.check=function(t,e){try{var n=s.util.request(e),o=c.XDomainRequest&&n instanceof XDomainRequest,i=t&&t.options&&t.options.secure?"https:":"http:",r=c.location&&i!=c.location.protocol;if(n&&(!o||!r))return!0}catch(t){}return!1},e.xdomainCheck=function(t){return e.check(t,!0)}}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,this),!function(t,n){function e(t){n.Transport.XHR.apply(this,arguments)}t.htmlfile=e,n.util.inherit(e,n.Transport.XHR),e.prototype.name="htmlfile",e.prototype.get=function(){this.doc=new window[["Active"].concat("Object").join("X")]("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close();var t=(this.doc.parentWindow.s=this).doc.createElement("div"),e=(t.className="socketio",this.doc.body.appendChild(t),this.iframe=this.doc.createElement("iframe"),t.appendChild(this.iframe),this),t=n.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+t,n.util.on(window,"unload",function(){e.destroy()})},e.prototype._=function(t,e){t=t.replace(/\\\//g,"/"),this.onData(t);try{var n=e.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(t){}},e.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(t){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},e.prototype.close=function(){return this.destroy(),n.Transport.XHR.prototype.close.call(this)},e.check=function(t){if("undefined"!=typeof window&&["Active"].concat("Object").join("X")in window)try{return new window[["Active"].concat("Object").join("X")]("htmlfile")&&n.Transport.XHR.check(t)}catch(t){}return!1},e.xdomainCheck=function(){return!1},n.transports.push("htmlfile")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports),!function(t,o,e){function n(){o.Transport.XHR.apply(this,arguments)}function i(){}t["xhr-polling"]=n,o.util.inherit(n,o.Transport.XHR),o.util.merge(n,o.Transport.XHR),n.prototype.name="xhr-polling",n.prototype.heartbeats=function(){return!1},n.prototype.open=function(){return o.Transport.XHR.prototype.open.call(this),!1},n.prototype.get=function(){var t;this.isOpen&&((t=this).xhr=this.request(),e.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function(){this.onload=i,this.onerror=i,t.retryCounter=1,t.onData(this.responseText),t.get()},this.xhr.onerror=function(){t.retryCounter++,!t.retryCounter||3<t.retryCounter?t.onClose():t.get()}):this.xhr.onreadystatechange=function(){4==this.readyState&&(this.onreadystatechange=i,200==this.status?(t.onData(this.responseText),t.get()):t.onClose())},this.xhr.send(null))},n.prototype.onClose=function(){if(o.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=i;try{this.xhr.abort()}catch(t){}this.xhr=null}},n.prototype.ready=function(t,e){var n=this;o.util.defer(function(){e.call(n)})},o.transports.push("xhr-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,this),!function(t,p,e){var o=e.document&&"MozAppearance"in e.document.documentElement.style;function n(t){p.Transport["xhr-polling"].apply(this,arguments),this.index=p.j.length;var e=this;p.j.push(function(t){e._(t)})}t["jsonp-polling"]=n,p.util.inherit(n,p.Transport["xhr-polling"]),n.prototype.name="jsonp-polling",n.prototype.post=function(t){var e,n,o,i,r=this,s=p.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);function c(){a(),r.socket.setBuffer(!1)}function a(){r.iframe&&r.form.removeChild(r.iframe);try{i=document.createElement('<iframe name="'+r.iframeId+'">')}catch(t){(i=document.createElement("iframe")).name=r.iframeId}i.id=r.iframeId,r.form.appendChild(i),r.iframe=i}this.form||(e=document.createElement("form"),n=document.createElement("textarea"),o=this.iframeId="socketio_iframe_"+this.index,e.className="socketio",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.display="none",e.target=o,e.method="POST",e.setAttribute("accept-charset","utf-8"),n.name="d",e.appendChild(n),document.body.appendChild(e),this.form=e,this.area=n),this.form.action=this.prepareUrl()+s,a(),this.area.value=p.JSON.stringify(t);try{this.form.submit()}catch(t){}this.iframe.attachEvent?i.onreadystatechange=function(){"complete"==r.iframe.readyState&&c()}:this.iframe.onload=c,this.socket.setBuffer(!0)},n.prototype.get=function(){var t=this,e=document.createElement("script"),n=p.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index),n=(this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.prepareUrl()+n,e.onerror=function(){t.onClose()},document.getElementsByTagName("script")[0]);n.parentNode.insertBefore(e,n),this.script=e,o&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},n.prototype._=function(t){return this.onData(t),this.isOpen&&this.get(),this},n.prototype.ready=function(t,e){var n=this;if(!o)return e.call(this);p.util.load(function(){e.call(n)})},n.check=function(){return"document"in e},n.xdomainCheck=function(){return!0},p.transports.push("jsonp-polling")}(void 0!==io?io.Transport:module.exports,void 0!==io?io:module.parent.exports,this),"function"==typeof define&&define.amd&&define([],function(){return io})}();